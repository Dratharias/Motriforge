graph TB
    %% ===== PRESENTATION LAYER =====
    subgraph Presentation ["ğŸ“± Presentation Layer"]
        Gateway["ğŸŒ API Gateway<br/><<Gateway>>"]
        MiddlewareChain["ğŸ”§ Middleware Chain<br/><<Pipeline>>"]
    end
    
    %% ===== ANTI-CORRUPTION LAYERS =====
    subgraph ACL ["ğŸ›¡ï¸ Anti-Corruption Layer"]
        UserACL["ğŸ‘¤ User ACL<br/><<AntiCorruption>>"]
        OrgACL["ğŸ¢ Organization ACL<br/><<AntiCorruption>>"]
        AuthACL["ğŸ” Auth ACL<br/><<AntiCorruption>>"]
        WorkoutACL["ğŸ’ª Workout ACL<br/><<AntiCorruption>>"]
        ExerciseACL["ğŸ¯ Exercise ACL<br/><<AntiCorruption>>"]
        ProgramACL["ğŸ“‹ Program ACL<br/><<AntiCorruption>>"]
        ProgressionACL["ğŸ“ˆ Progression ACL<br/><<AntiCorruption>>"]
        TrainerACL["ğŸ¯ Trainer ACL<br/><<AntiCorruption>>"]
        NotificationACL["ğŸ”” Notification ACL<br/><<AntiCorruption>>"]
    end
    
    %% ===== BOUNDED CONTEXTS =====
    subgraph BoundedContexts ["ğŸ¯ Bounded Contexts"]
        UserContext["ğŸ‘¤ User Management<br/><<Context>>"]
        OrgContext["ğŸ¢ Organization<br/><<Context>>"]
        AuthContext["ğŸ” Authentication<br/><<Context>>"]
        WorkoutContext["ğŸ’ª Workout<br/><<Context>>"]
        ExerciseContext["ğŸ¯ Exercise<br/><<Context>>"]
        ProgramContext["ğŸ“‹ Program<br/><<Context>>"]
        ProgressionContext["ğŸ“ˆ Progression<br/><<Context>>"]
        TrainerContext["ğŸ‘¨â€ğŸ« Trainer<br/><<Context>>"]
        NotificationContext["ğŸ”” Notification<br/><<Context>>"]
    end
    
    %% ===== SHARED INFRASTRUCTURE =====
    subgraph SharedInfra ["ğŸ”§ Shared Infrastructure"]
        EventBus["ğŸ“¨ Event Bus<br/><<EventBus>>"]
        EventStore["ğŸ“š Event Store<br/><<EventStore>>"]
        CacheCluster["ğŸ’¾ Cache Cluster<br/><<Cache>>"]
        Database["ğŸ—„ï¸ Database<br/><<Database>>"]
        FileStorage["ğŸ“ File Storage<br/><<Storage>>"]
        SearchEngine["ğŸ” Search Engine<br/><<Search>>"]
    end
    
    %% ===== CROSS-CUTTING CONCERNS =====
    subgraph CrossCutting ["âš¡ Cross-Cutting"]
        ServiceDiscovery["ğŸ“‹ Service Discovery<br/><<Registry>>"]
        ConfigManager["âš™ï¸ Config Manager<br/><<Config>>"]
        Metrics["ğŸ“Š Metrics<br/><<Metrics>>"]
        Logging["ğŸ“ Logging<br/><<Logging>>"]
        Security["ğŸ”’ Security<br/><<Security>>"]
    end
    
    %% ===== EXTERNAL SYSTEMS =====
    subgraph External ["ğŸŒ External Systems"]
        PaymentGateways["ğŸ’³ Payment Gateways<br/><<External>>"]
        EmailProviders["ğŸ“§ Email Providers<br/><<External>>"]
        PushServices["ğŸ“± Push Services<br/><<External>>"]
        CloudStorage["â˜ï¸ Cloud Storage<br/><<External>>"]
        AnalyticsPlatforms["ğŸ“ˆ Analytics<br/><<External>>"]
    end
    
    %% ===== CONNECTIONS =====
    Gateway --> MiddlewareChain
    MiddlewareChain --> ACL
    
    UserACL --> UserContext
    OrgACL --> OrgContext
    AuthACL --> AuthContext
    WorkoutACL --> WorkoutContext
    ExerciseACL --> ExerciseContext
    ProgramACL --> ProgramContext
    ProgressionACL --> ProgressionContext
    TrainerACL --> TrainerContext
    NotificationACL --> NotificationContext
    
    BoundedContexts --> EventBus
    BoundedContexts --> CacheCluster
    BoundedContexts --> Database
    
    EventBus --> EventStore
    
    BoundedContexts --> ServiceDiscovery
    BoundedContexts --> CrossCutting
    
    NotificationContext --> EmailProviders
    NotificationContext --> PushServices
    TrainerContext --> PaymentGateways
    UserContext --> CloudStorage
    ProgressionContext --> AnalyticsPlatforms
    
    %% ===== STYLING =====
    classDef context fill:#e1f5fe,stroke:#01579b,stroke-width:3px
    classDef acl fill:#fff8e1,stroke:#f57f17,stroke-width:3px
    classDef infra fill:#e8f5e8,stroke:#1b5e20,stroke-width:2px
    classDef external fill:#fafafa,stroke:#424242,stroke-width:2px
    classDef crosscutting fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    
    class UserContext,OrgContext,AuthContext,WorkoutContext,ExerciseContext,ProgramContext,ProgressionContext,TrainerContext,NotificationContext context
    class UserACL,OrgACL,AuthACL,WorkoutACL,ExerciseACL,ProgramACL,ProgressionACL,TrainerACL,NotificationACL acl
    class EventBus,EventStore,CacheCluster,Database,FileStorage,SearchEngine infra
    class PaymentGateways,EmailProviders,PushServices,CloudStorage,AnalyticsPlatforms external
    class ServiceDiscovery,ConfigManager,Metrics,Logging,Security crosscutting
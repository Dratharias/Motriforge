graph TB
    %% ===== PRESENTATION LAYER =====
    subgraph Presentation ["📱 Presentation Layer"]
        Gateway["🌐 API Gateway<br/><<Gateway>>"]
        MiddlewareChain["🔧 Middleware Chain<br/><<Pipeline>>"]
    end
    
    %% ===== ANTI-CORRUPTION LAYERS =====
    subgraph ACL ["🛡️ Anti-Corruption Layer"]
        UserACL["👤 User ACL<br/><<AntiCorruption>>"]
        OrgACL["🏢 Organization ACL<br/><<AntiCorruption>>"]
        AuthACL["🔐 Auth ACL<br/><<AntiCorruption>>"]
        WorkoutACL["💪 Workout ACL<br/><<AntiCorruption>>"]
        ExerciseACL["🎯 Exercise ACL<br/><<AntiCorruption>>"]
        ProgramACL["📋 Program ACL<br/><<AntiCorruption>>"]
        ProgressionACL["📈 Progression ACL<br/><<AntiCorruption>>"]
        TrainerACL["🎯 Trainer ACL<br/><<AntiCorruption>>"]
        NotificationACL["🔔 Notification ACL<br/><<AntiCorruption>>"]
    end
    
    %% ===== BOUNDED CONTEXTS =====
    subgraph BoundedContexts ["🎯 Bounded Contexts"]
        UserContext["👤 User Management<br/><<Context>>"]
        OrgContext["🏢 Organization<br/><<Context>>"]
        AuthContext["🔐 Authentication<br/><<Context>>"]
        WorkoutContext["💪 Workout<br/><<Context>>"]
        ExerciseContext["🎯 Exercise<br/><<Context>>"]
        ProgramContext["📋 Program<br/><<Context>>"]
        ProgressionContext["📈 Progression<br/><<Context>>"]
        TrainerContext["👨‍🏫 Trainer<br/><<Context>>"]
        NotificationContext["🔔 Notification<br/><<Context>>"]
    end
    
    %% ===== SHARED INFRASTRUCTURE =====
    subgraph SharedInfra ["🔧 Shared Infrastructure"]
        EventBus["📨 Event Bus<br/><<EventBus>>"]
        EventStore["📚 Event Store<br/><<EventStore>>"]
        CacheCluster["💾 Cache Cluster<br/><<Cache>>"]
        Database["🗄️ Database<br/><<Database>>"]
        FileStorage["📁 File Storage<br/><<Storage>>"]
        SearchEngine["🔍 Search Engine<br/><<Search>>"]
    end
    
    %% ===== CROSS-CUTTING CONCERNS =====
    subgraph CrossCutting ["⚡ Cross-Cutting"]
        ServiceDiscovery["📋 Service Discovery<br/><<Registry>>"]
        ConfigManager["⚙️ Config Manager<br/><<Config>>"]
        Metrics["📊 Metrics<br/><<Metrics>>"]
        Logging["📝 Logging<br/><<Logging>>"]
        Security["🔒 Security<br/><<Security>>"]
    end
    
    %% ===== EXTERNAL SYSTEMS =====
    subgraph External ["🌐 External Systems"]
        PaymentGateways["💳 Payment Gateways<br/><<External>>"]
        EmailProviders["📧 Email Providers<br/><<External>>"]
        PushServices["📱 Push Services<br/><<External>>"]
        CloudStorage["☁️ Cloud Storage<br/><<External>>"]
        AnalyticsPlatforms["📈 Analytics<br/><<External>>"]
    end
    
    %% ===== CONNECTIONS =====
    Gateway --> MiddlewareChain
    MiddlewareChain --> ACL
    
    UserACL --> UserContext
    OrgACL --> OrgContext
    AuthACL --> AuthContext
    WorkoutACL --> WorkoutContext
    ExerciseACL --> ExerciseContext
    ProgramACL --> ProgramContext
    ProgressionACL --> ProgressionContext
    TrainerACL --> TrainerContext
    NotificationACL --> NotificationContext
    
    BoundedContexts --> EventBus
    BoundedContexts --> CacheCluster
    BoundedContexts --> Database
    
    EventBus --> EventStore
    
    BoundedContexts --> ServiceDiscovery
    BoundedContexts --> CrossCutting
    
    NotificationContext --> EmailProviders
    NotificationContext --> PushServices
    TrainerContext --> PaymentGateways
    UserContext --> CloudStorage
    ProgressionContext --> AnalyticsPlatforms
    
    %% ===== STYLING =====
    classDef context fill:#e1f5fe,stroke:#01579b,stroke-width:3px
    classDef acl fill:#fff8e1,stroke:#f57f17,stroke-width:3px
    classDef infra fill:#e8f5e8,stroke:#1b5e20,stroke-width:2px
    classDef external fill:#fafafa,stroke:#424242,stroke-width:2px
    classDef crosscutting fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    
    class UserContext,OrgContext,AuthContext,WorkoutContext,ExerciseContext,ProgramContext,ProgressionContext,TrainerContext,NotificationContext context
    class UserACL,OrgACL,AuthACL,WorkoutACL,ExerciseACL,ProgramACL,ProgressionACL,TrainerACL,NotificationACL acl
    class EventBus,EventStore,CacheCluster,Database,FileStorage,SearchEngine infra
    class PaymentGateways,EmailProviders,PushServices,CloudStorage,AnalyticsPlatforms external
    class ServiceDiscovery,ConfigManager,Metrics,Logging,Security crosscutting
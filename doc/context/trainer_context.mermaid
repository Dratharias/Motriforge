graph TB
    %% ===== TRAINER MANAGEMENT CONTEXT =====
    subgraph TrainerContext ["ğŸ‘¨â€ğŸ« Trainer Management Context"]
        
        %% ===== DOMAIN LAYER (HEXAGON CORE) =====
        subgraph TrainerDomain ["Domain Layer <<DomainCore>>"]
            direction TB
            
            %% Aggregates
            TrainerProfile["ğŸ‘¨â€ğŸ« Trainer Profile<br/><<AggregateRoot>>"]
            ClientCoachRelationship["ğŸ¤ Client-Coach Relationship<br/><<AggregateRoot>>"]
            CoachingSession["ğŸ“… Coaching Session<br/><<AggregateRoot>>"]
            ProgramAssignment["ğŸ“‹ Program Assignment<br/><<AggregateRoot>>"]
            TrainerDashboard["ğŸ“Š Trainer Dashboard<br/><<AggregateRoot>>"]
            
            %% Entities
            Certificate["ğŸ… Certificate<br/><<Entity>>"]
            ClientAlert["ğŸš¨ Client Alert<br/><<Entity>>"]
            TrainingFeedback["ğŸ’¬ Training Feedback<br/><<Entity>>"]
            MediaNote["ğŸ“ Media Note<br/><<Entity>>"]
            PermissionSet["ğŸ”’ Permission Set<br/><<Entity>>"]
            ProgramModification["ğŸ”§ Program Modification<br/><<Entity>>"]
            
            %% Value Objects
            TrainerId["ğŸ†” Trainer ID<br/><<ValueObject>>"]
            ClientId["ğŸ†” Client ID<br/><<ValueObject>>"]
            SessionDuration["â±ï¸ Session Duration<br/><<ValueObject>>"]
            FeedbackRating["â­ Feedback Rating<br/><<ValueObject>>"]
            HourlyRate["ğŸ’° Hourly Rate<br/><<ValueObject>>"]
            
            %% Domain Services
            RelationshipManagementService["ğŸ¤ Relationship Management<br/><<DomainService>>"]
            SessionSchedulingService["ğŸ“… Session Scheduling<br/><<DomainService>>"]
            FeedbackAnalysisService["ğŸ’¬ Feedback Analysis<br/><<DomainService>>"]
            ProgressMonitoringService["ğŸ“Š Progress Monitoring<br/><<DomainService>>"]
        end
        
        %% ===== PORTS (DOMAIN INTERFACES) =====
        subgraph TrainerPorts ["Ports <<Port>>"]
            direction TB
            
            %% Repository Ports
            ITrainerRepo["ğŸ‘¨â€ğŸ« ITrainerRepository<br/><<Port>>"]
            IRelationshipRepo["ğŸ¤ IRelationshipRepository<br/><<Port>>"]
            ISessionRepo["ğŸ“… ISessionRepository<br/><<Port>>"]
            IAssignmentRepo["ğŸ“‹ IAssignmentRepository<br/><<Port>>"]
            IFeedbackRepo["ğŸ’¬ IFeedbackRepository<br/><<Port>>"]
            IAlertRepo["ğŸš¨ IAlertRepository<br/><<Port>>"]
            
            %% Service Ports
            IPaymentService["ğŸ’³ IPaymentService<br/><<Port>>"]
            ICalendarService["ğŸ“… ICalendarService<br/><<Port>>"]
            IVideoCallService["ğŸ“¹ IVideoCallService<br/><<Port>>"]
            INotificationService["ğŸ”” INotificationService<br/><<Port>>"]
            IUserService["ğŸ‘¤ IUserService<br/><<Port>>"]
            IProgramService["ğŸ“‹ IProgramService<br/><<Port>>"]
            IProgressionService["ğŸ“ˆ IProgressionService<br/><<Port>>"]
        end
        
        %% ===== APPLICATION LAYER =====
        subgraph TrainerApplication ["Application Layer <<Application>>"]
            direction TB
            
            %% Commands
            subgraph TrainerCommands ["Commands"]
                CreateTrainerProfileCmd["â• Create Trainer Profile<br/><<Command>>"]
                UpdateTrainerProfileCmd["âœï¸ Update Profile<br/><<Command>>"]
                EstablishRelationshipCmd["ğŸ¤ Establish Relationship<br/><<Command>>"]
                ScheduleSessionCmd["ğŸ“… Schedule Session<br/><<Command>>"]
                ProvideTrainingFeedbackCmd["ğŸ’¬ Provide Feedback<br/><<Command>>"]
                AssignProgramCmd["ğŸ“‹ Assign Program<br/><<Command>>"]
                ModifyProgramCmd["ğŸ”§ Modify Program<br/><<Command>>"]
                CreateClientAlertCmd["ğŸš¨ Create Alert<br/><<Command>>"]
                ProcessPaymentCmd["ğŸ’³ Process Payment<br/><<Command>>"]
            end
            
            %% Queries
            subgraph TrainerQueries ["Queries"]
                GetTrainerProfileQuery["ğŸ‘¨â€ğŸ« Get Trainer Profile<br/><<Query>>"]
                GetClientListQuery["ğŸ‘¥ Get Client List<br/><<Query>>"]
                GetUpcomingSessionsQuery["ğŸ“… Get Upcoming Sessions<br/><<Query>>"]
                GetTrainerDashboardQuery["ğŸ“Š Get Dashboard<br/><<Query>>"]
                GetClientProgressQuery["ğŸ“ˆ Get Client Progress<br/><<Query>>"]
                GetFeedbackHistoryQuery["ğŸ’¬ Get Feedback History<br/><<Query>>"]
                GetActiveAlertsQuery["ğŸš¨ Get Active Alerts<br/><<Query>>"]
                GetEarningsReportQuery["ğŸ’° Get Earnings Report<br/><<Query>>"]
            end
            
            %% Sagas
            subgraph TrainerSagas ["Sagas"]
                ClientOnboardingSaga["ğŸ¯ Client Onboarding<br/><<Saga>>"]
                SessionCompletionSaga["ğŸ“… Session Completion<br/><<Saga>>"]
                PaymentProcessingSaga["ğŸ’³ Payment Processing<br/><<Saga>>"]
                ProgressReviewSaga["ğŸ“Š Progress Review<br/><<Saga>>"]
            end
        end
        
        %% ===== INFRASTRUCTURE LAYER (ADAPTERS) =====
        subgraph TrainerAdapters ["Infrastructure Layer <<Adapter>>"]
            direction TB
            
            %% Repository Adapters
            subgraph TrainerRepositoryAdapters ["Repository Adapters"]
                MongoTrainerRepo["ğŸ—„ï¸ Mongo Trainer Repository<br/><<RepositoryAdapter>>"]
                MongoRelationshipRepo["ğŸ—„ï¸ Mongo Relationship Repository<br/><<RepositoryAdapter>>"]
                MongoSessionRepo["ğŸ—„ï¸ Mongo Session Repository<br/><<RepositoryAdapter>>"]
                MongoAssignmentRepo["ğŸ—„ï¸ Mongo Assignment Repository<br/><<RepositoryAdapter>>"]
                MongoFeedbackRepo["ğŸ—„ï¸ Mongo Feedback Repository<br/><<RepositoryAdapter>>"]
                MongoAlertRepo["ğŸ—„ï¸ Mongo Alert Repository<br/><<RepositoryAdapter>>"]
            end
            
            %% Service Adapters
            subgraph TrainerServiceAdapters ["Service Adapters"]
                StripePaymentAdapter["ğŸ’³ Stripe Payment<br/><<PaymentAdapter>>"]
                GoogleCalendarAdapter["ğŸ“… Google Calendar<br/><<CalendarAdapter>>"]
                ZoomVideoAdapter["ğŸ“¹ Zoom Video<br/><<VideoAdapter>>"]
                FCMNotificationAdapter["ğŸ“± FCM Notification<br/><<NotificationAdapter>>"]
                UserContextAdapter["ğŸ‘¤ User Context<br/><<ContextAdapter>>"]
                ProgramContextAdapter["ğŸ“‹ Program Context<br/><<ContextAdapter>>"]
                ProgressionContextAdapter["ğŸ“ˆ Progression Context<br/><<ContextAdapter>>"]
            end
            
            %% Cache Adapters
            subgraph TrainerCacheAdapters ["Cache Adapters"]
                TrainerProfileCache["ğŸ’¾ Trainer Profile Cache<br/><<CacheAdapter>>"]
                ClientListCache["ğŸ’¾ Client List Cache<br/><<CacheAdapter>>"]
                SessionCache["ğŸ’¾ Session Cache<br/><<CacheAdapter>>"]
                DashboardCache["ğŸ’¾ Dashboard Cache<br/><<CacheAdapter>>"]
            end
        end
    end
    
    %% ===== EXTERNAL SYSTEMS =====
    subgraph TrainerExternal ["ğŸŒ External Systems"]
        MongoDB["ğŸ—„ï¸ MongoDB<br/><<Database>>"]
        RedisCache["ğŸ”´ Redis<br/><<Cache>>"]
        StripeAPI["ğŸ’³ Stripe API<br/><<PaymentService>>"]
        GoogleCalendarAPI["ğŸ“… Google Calendar API<br/><<CalendarService>>"]
        ZoomAPI["ğŸ“¹ Zoom API<br/><<VideoService>>"]
        FCMService["ğŸ“± FCM Service<br/><<NotificationService>>"]
        EmailService["ğŸ“§ Email Service<br/><<EmailService>>"]
        SMSService["ğŸ“± SMS Service<br/><<SMSService>>"]
    end
    
    %% ===== EVENTS =====
    subgraph TrainerEvents ["ğŸ“¨ Domain Events"]
        TrainerProfileCreatedEvent["ğŸ‘¨â€ğŸ« Trainer Profile Created<br/><<DomainEvent>>"]
        RelationshipEstablishedEvent["ğŸ¤ Relationship Established<br/><<DomainEvent>>"]
        SessionScheduledEvent["ğŸ“… Session Scheduled<br/><<DomainEvent>>"]
        SessionCompletedEvent["âœ… Session Completed<br/><<DomainEvent>>"]
        FeedbackProvidedEvent["ğŸ’¬ Feedback Provided<br/><<DomainEvent>>"]
        ProgramAssignedEvent["ğŸ“‹ Program Assigned<br/><<DomainEvent>>"]
        ProgramModifiedEvent["ğŸ”§ Program Modified<br/><<DomainEvent>>"]
        ClientAlertCreatedEvent["ğŸš¨ Client Alert Created<br/><<DomainEvent>>"]
        PaymentProcessedEvent["ğŸ’³ Payment Processed<br/><<DomainEvent>>"]
    end
    
    %% ===== READ MODELS =====
    subgraph TrainerReadModels ["ğŸ“Š Read Models"]
        TrainerProfileRM["ğŸ‘¨â€ğŸ« Trainer Profile<br/><<ReadModel>>"]
        TrainerDashboardRM["ğŸ“Š Trainer Dashboard<br/><<ReadModel>>"]
        ClientListRM["ğŸ‘¥ Client List<br/><<ReadModel>>"]
        SessionScheduleRM["ğŸ“… Session Schedule<br/><<ReadModel>>"]
        FeedbackSummaryRM["ğŸ’¬ Feedback Summary<br/><<ReadModel>>"]
        EarningsReportRM["ğŸ’° Earnings Report<br/><<ReadModel>>"]
        ClientProgressRM["ğŸ“ˆ Client Progress<br/><<ReadModel>>"]
        AlertSummaryRM["ğŸš¨ Alert Summary<br/><<ReadModel>>"]
    end
    
    %% ===== RELATIONSHIPS =====
    
    %% Domain to Ports (Dependency Inversion)
    TrainerProfile -->|uses| ITrainerRepo
    TrainerProfile -->|uses| IPaymentService
    ClientCoachRelationship -->|uses| IRelationshipRepo
    ClientCoachRelationship -->|uses| IUserService
    CoachingSession -->|uses| ISessionRepo
    CoachingSession -->|uses| ICalendarService
    CoachingSession -->|uses| IVideoCallService
    ProgramAssignment -->|uses| IAssignmentRepo
    ProgramAssignment -->|uses| IProgramService
    SessionSchedulingService -->|uses| INotificationService
    ProgressMonitoringService -->|uses| IProgressionService
    
    %% Application to Domain
    TrainerCommands -->|orchestrates| TrainerProfile
    TrainerCommands -->|orchestrates| ClientCoachRelationship
    TrainerCommands -->|orchestrates| CoachingSession
    TrainerCommands -->|orchestrates| ProgramAssignment
    TrainerQueries -->|reads| TrainerProfile
    TrainerQueries -->|reads| ClientCoachRelationship
    TrainerQueries -->|reads| CoachingSession
    TrainerQueries -->|reads| TrainerDashboard
    
    %% Ports to Adapters (Implementation)
    ITrainerRepo -.->|implements| MongoTrainerRepo
    IRelationshipRepo -.->|implements| MongoRelationshipRepo
    ISessionRepo -.->|implements| MongoSessionRepo
    IAssignmentRepo -.->|implements| MongoAssignmentRepo
    IFeedbackRepo -.->|implements| MongoFeedbackRepo
    IAlertRepo -.->|implements| MongoAlertRepo
    IPaymentService -.->|implements| StripePaymentAdapter
    ICalendarService -.->|implements| GoogleCalendarAdapter
    IVideoCallService -.->|implements| ZoomVideoAdapter
    INotificationService -.->|implements| FCMNotificationAdapter
    IUserService -.->|implements| UserContextAdapter
    IProgramService -.->|implements| ProgramContextAdapter
    IProgressionService -.->|implements| ProgressionContextAdapter
    
    %% Adapters to External Systems
    MongoTrainerRepo -->|connects| MongoDB
    MongoRelationshipRepo -->|connects| MongoDB
    MongoSessionRepo -->|connects| MongoDB
    MongoAssignmentRepo -->|connects| MongoDB
    MongoFeedbackRepo -->|connects| MongoDB
    MongoAlertRepo -->|connects| MongoDB
    TrainerProfileCache -->|connects| RedisCache
    ClientListCache -->|connects| RedisCache
    SessionCache -->|connects| RedisCache
    DashboardCache -->|connects| RedisCache
    StripePaymentAdapter -->|connects| StripeAPI
    GoogleCalendarAdapter -->|connects| GoogleCalendarAPI
    ZoomVideoAdapter -->|connects| ZoomAPI
    FCMNotificationAdapter -->|connects| FCMService
    FCMNotificationAdapter -->|also uses| EmailService
    FCMNotificationAdapter -->|also uses| SMSService
    
    %% Cross-Context Communication
    UserContextAdapter -.->|async calls| UserContext
    ProgramContextAdapter -.->|async calls| ProgramContext
    ProgressionContextAdapter -.->|async calls| ProgressionContext
    
    %% Domain Events
    TrainerProfile -.->|publishes| TrainerProfileCreatedEvent
    ClientCoachRelationship -.->|publishes| RelationshipEstablishedEvent
    CoachingSession -.->|publishes| SessionScheduledEvent
    CoachingSession -.->|publishes| SessionCompletedEvent
    TrainingFeedback -.->|publishes| FeedbackProvidedEvent
    ProgramAssignment -.->|publishes| ProgramAssignedEvent
    ProgramModification -.->|publishes| ProgramModifiedEvent
    ClientAlert -.->|publishes| ClientAlertCreatedEvent
    TrainerProfile -.->|publishes| PaymentProcessedEvent
    
    %% Event to Read Models
    TrainerProfileCreatedEvent -.->|projects to| TrainerProfileRM
    RelationshipEstablishedEvent -.->|projects to| ClientListRM
    SessionScheduledEvent -.->|projects to| SessionScheduleRM
    SessionCompletedEvent -.->|projects to| TrainerDashboardRM
    FeedbackProvidedEvent -.->|projects to| FeedbackSummaryRM
    PaymentProcessedEvent -.->|projects to| EarningsReportRM
    ClientAlertCreatedEvent -.->|projects to| AlertSummaryRM
    
    %% Sagas
    ClientOnboardingSaga -.->|listens to| RelationshipEstablishedEvent
    SessionCompletionSaga -.->|listens to| SessionCompletedEvent
    PaymentProcessingSaga -.->|listens to| SessionCompletedEvent
    ProgressReviewSaga -.->|listens to| FeedbackProvidedEvent
    
    %% External References
    UserContext["ğŸ‘¤ User Context<br/><<ExternalContext>>"]
    ProgramContext["ğŸ“‹ Program Context<br/><<ExternalContext>>"]
    ProgressionContext["ğŸ“ˆ Progression Context<br/><<ExternalContext>>"]
    
    %% ===== STYLING =====
    classDef aggregate fill:#e1f5fe,stroke:#01579b,stroke-width:3px
    classDef entity fill:#e8f5e8,stroke:#1b5e20,stroke-width:2px
    classDef valueObject fill:#fff3e0,stroke:#e65100,stroke-width:2px
    classDef port fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    classDef adapter fill:#fff8e1,stroke:#f57f17,stroke-width:2px
    classDef external fill:#fafafa,stroke:#424242,stroke-width:2px
    classDef command fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px
    classDef query fill:#fce4ec,stroke:#880e4f,stroke-width:2px
    classDef event fill:#f1f8e9,stroke:#33691e,stroke-width:2px
    classDef readModel fill:#e0f2f1,stroke:#00695c,stroke-width:2px
    classDef externalContext fill:#f5f5f5,stroke:#757575,stroke-width:2px,stroke-dasharray: 5 5
    
    class TrainerProfile,ClientCoachRelationship,CoachingSession,ProgramAssignment,TrainerDashboard aggregate
    class Certificate,ClientAlert,TrainingFeedback,MediaNote,PermissionSet,ProgramModification entity
    class TrainerId,ClientId,SessionDuration,FeedbackRating,HourlyRate valueObject
    class ITrainerRepo,IRelationshipRepo,ISessionRepo,IAssignmentRepo,IFeedbackRepo,IAlertRepo,IPaymentService,ICalendarService,IVideoCallService,INotificationService,IUserService,IProgramService,IProgressionService port
    class MongoTrainerRepo,MongoRelationshipRepo,MongoSessionRepo,MongoAssignmentRepo,MongoFeedbackRepo,MongoAlertRepo,StripePaymentAdapter,GoogleCalendarAdapter,ZoomVideoAdapter,FCMNotificationAdapter,UserContextAdapter,ProgramContextAdapter,ProgressionContextAdapter,TrainerProfileCache,ClientListCache,SessionCache,DashboardCache adapter
    class MongoDB,RedisCache,StripeAPI,GoogleCalendarAPI,ZoomAPI,FCMService,EmailService,SMSService external
    class CreateTrainerProfileCmd,UpdateTrainerProfileCmd,EstablishRelationshipCmd,ScheduleSessionCmd,ProvideTrainingFeedbackCmd,AssignProgramCmd,ModifyProgramCmd,CreateClientAlertCmd,ProcessPaymentCmd command
    class GetTrainerProfileQuery,GetClientListQuery,GetUpcomingSessionsQuery,GetTrainerDashboardQuery,GetClientProgressQuery,GetFeedbackHistoryQuery,GetActiveAlertsQuery,GetEarningsReportQuery query
    class TrainerProfileCreatedEvent,RelationshipEstablishedEvent,SessionScheduledEvent,SessionCompletedEvent,FeedbackProvidedEvent,ProgramAssignedEvent,ProgramModifiedEvent,ClientAlertCreatedEvent,PaymentProcessedEvent event
    class TrainerProfileRM,TrainerDashboardRM,ClientListRM,SessionScheduleRM,FeedbackSummaryRM,EarningsReportRM,ClientProgressRM,AlertSummaryRM readModel
    class UserContext,ProgramContext,ProgressionContext externalContext
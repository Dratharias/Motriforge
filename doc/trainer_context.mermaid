graph TB
    %% ===== TRAINER MANAGEMENT CONTEXT =====
    subgraph TrainerContext ["ğŸ‘¨â€ğŸ« Trainer Management Context"]
        
        %% ===== APPLICATION SERVICE LAYER =====
        subgraph TrainerApplicationLayer ["Application Service Layer <<Application>>"]
            TrainerApplicationService["ğŸ‘¨â€ğŸ« Trainer Application Service<br/><<ApplicationService>>"]
            
            %% Commands
            subgraph TrainerCommands ["Commands"]
                CreateTrainerProfileCmd["â• Create Trainer Profile<br/><<Command>>"]
                UpdateTrainerProfileCmd["âœï¸ Update Profile<br/><<Command>>"]
                EstablishRelationshipCmd["ğŸ¤ Establish Relationship<br/><<Command>>"]
                ScheduleSessionCmd["ğŸ“… Schedule Session<br/><<Command>>"]
                ProvideTrainingFeedbackCmd["ğŸ’¬ Provide Feedback<br/><<Command>>"]
                AssignProgramCmd["ğŸ“‹ Assign Program<br/><<Command>>"]
                ModifyProgramCmd["ğŸ”§ Modify Program<br/><<Command>>"]
                CreateClientAlertCmd["ğŸš¨ Create Alert<br/><<Command>>"]
                ProcessPaymentCmd["ğŸ’³ Process Payment<br/><<Command>>"]
                CertifyTrainerCmd["ğŸ… Certify Trainer<br/><<Command>>"]
            end
            
            %% Queries
            subgraph TrainerQueries ["Queries"]
                GetTrainerProfileQuery["ğŸ‘¨â€ğŸ« Get Trainer Profile<br/><<Query>>"]
                GetClientListQuery["ğŸ‘¥ Get Client List<br/><<Query>>"]
                GetUpcomingSessionsQuery["ğŸ“… Get Upcoming Sessions<br/><<Query>>"]
                GetTrainerDashboardQuery["ğŸ“Š Get Dashboard<br/><<Query>>"]
                GetClientProgressQuery["ğŸ“ˆ Get Client Progress<br/><<Query>>"]
                GetFeedbackHistoryQuery["ğŸ’¬ Get Feedback History<br/><<Query>>"]
                GetActiveAlertsQuery["ğŸš¨ Get Active Alerts<br/><<Query>>"]
                GetEarningsReportQuery["ğŸ’° Get Earnings Report<br/><<Query>>"]
                SearchTrainersQuery["ğŸ” Search Trainers<br/><<Query>>"]
            end
            
            %% Sagas
            subgraph TrainerSagas ["Sagas"]
                ClientOnboardingSaga["ğŸ¯ Client Onboarding<br/><<Saga>>"]
                SessionCompletionSaga["ğŸ“… Session Completion<br/><<Saga>>"]
                PaymentProcessingSaga["ğŸ’³ Payment Processing<br/><<Saga>>"]
                ProgressReviewSaga["ğŸ“Š Progress Review<br/><<Saga>>"]
                CertificationSaga["ğŸ… Certification<br/><<Saga>>"]
            end
        end
        
        %% ===== DOMAIN LAYER (HEXAGON CORE) =====
        subgraph TrainerDomain ["Domain Layer <<DomainCore>>"]
            direction TB
            
            %% Aggregates
            TrainerProfile["ğŸ‘¨â€ğŸ« Trainer Profile<br/><<AggregateRoot>>"]
            ClientCoachRelationship["ğŸ¤ Client-Coach Relationship<br/><<AggregateRoot>>"]
            CoachingSession["ğŸ“… Coaching Session<br/><<AggregateRoot>>"]
            ProgramAssignment["ğŸ“‹ Program Assignment<br/><<AggregateRoot>>"]
            TrainerDashboard["ğŸ“Š Trainer Dashboard<br/><<AggregateRoot>>"]
            
            %% Entities
            Certificate["ğŸ… Certificate<br/><<Entity>>"]
            ClientAlert["ğŸš¨ Client Alert<br/><<Entity>>"]
            TrainingFeedback["ğŸ’¬ Training Feedback<br/><<Entity>>"]
            MediaNote["ğŸ“ Media Note<br/><<Entity>>"]
            PermissionSet["ğŸ”’ Permission Set<br/><<Entity>>"]
            ProgramModification["ğŸ”§ Program Modification<br/><<Entity>>"]
            
            %% Value Objects
            TrainerId["ğŸ†” Trainer ID<br/><<ValueObject>>"]
            ClientId["ğŸ†” Client ID<br/><<ValueObject>>"]
            SessionDuration["â±ï¸ Session Duration<br/><<ValueObject>>"]
            FeedbackRating["â­ Feedback Rating<br/><<ValueObject>>"]
            HourlyRate["ğŸ’° Hourly Rate<br/><<ValueObject>>"]
            
            %% Domain Services
            RelationshipManagementService["ğŸ¤ Relationship Management<br/><<DomainService>>"]
            SessionSchedulingService["ğŸ“… Session Scheduling<br/><<DomainService>>"]
            FeedbackAnalysisService["ğŸ’¬ Feedback Analysis<br/><<DomainService>>"]
            ProgressMonitoringService["ğŸ“Š Progress Monitoring<br/><<DomainService>>"]
            CertificationService["ğŸ… Certification<br/><<DomainService>>"]
        end
        
        %% ===== PORTS (DOMAIN INTERFACES) =====
        subgraph TrainerPorts ["Ports <<Port>>"]
            direction TB
            
            %% Repository Ports
            ITrainerRepo["ğŸ‘¨â€ğŸ« ITrainerRepository<br/><<Port>>"]
            IRelationshipRepo["ğŸ¤ IRelationshipRepository<br/><<Port>>"]
            ISessionRepo["ğŸ“… ISessionRepository<br/><<Port>>"]
            IAssignmentRepo["ğŸ“‹ IAssignmentRepository<br/><<Port>>"]
            IFeedbackRepo["ğŸ’¬ IFeedbackRepository<br/><<Port>>"]
            IAlertRepo["ğŸš¨ IAlertRepository<br/><<Port>>"]
            
            %% Service Ports
            IPaymentService["ğŸ’³ IPaymentService<br/><<Port>>"]
            ICalendarService["ğŸ“… ICalendarService<br/><<Port>>"]
            IVideoCallService["ğŸ“¹ IVideoCallService<br/><<Port>>"]
            INotificationService["ğŸ”” INotificationService<br/><<Port>>"]
            IUserService["ğŸ‘¤ IUserService<br/><<Port>>"]
            IProgramService["ğŸ“‹ IProgramService<br/><<Port>>"]
            IProgressionService["ğŸ“ˆ IProgressionService<br/><<Port>>"]
            IIdentityService["ğŸ†” IIdentityService<br/><<Port>>"]
            ICertificationService["ğŸ… ICertificationService<br/><<Port>>"]
        end
        
        %% ===== INFRASTRUCTURE LAYER (ADAPTERS) =====
        subgraph TrainerAdapters ["Infrastructure Layer <<Adapter>>"]
            direction TB
            
            %% Repository Adapters
            subgraph TrainerRepositoryAdapters ["Repository Adapters"]
                MongoTrainerRepo["ğŸ—„ï¸ Mongo Trainer Repository<br/><<RepositoryAdapter>>"]
                MongoRelationshipRepo["ğŸ—„ï¸ Mongo Relationship Repository<br/><<RepositoryAdapter>>"]
                MongoSessionRepo["ğŸ—„ï¸ Mongo Session Repository<br/><<RepositoryAdapter>>"]
                MongoAssignmentRepo["ğŸ—„ï¸ Mongo Assignment Repository<br/><<RepositoryAdapter>>"]
                MongoFeedbackRepo["ğŸ—„ï¸ Mongo Feedback Repository<br/><<RepositoryAdapter>>"]
                MongoAlertRepo["ğŸ—„ï¸ Mongo Alert Repository<br/><<RepositoryAdapter>>"]
            end
            
            %% Service Adapters
            subgraph TrainerServiceAdapters ["Service Adapters"]
                StripePaymentAdapter["ğŸ’³ Stripe Payment<br/><<PaymentAdapter>>"]
                GoogleCalendarAdapter["ğŸ“… Google Calendar<br/><<CalendarAdapter>>"]
                ZoomVideoAdapter["ğŸ“¹ Zoom Video<br/><<VideoAdapter>>"]
                FCMNotificationAdapter["ğŸ“± FCM Notification<br/><<NotificationAdapter>>"]
                UserContextAdapter["ğŸ‘¤ User Context<br/><<ContextAdapter>>"]
                ProgramContextAdapter["ğŸ“‹ Program Context<br/><<ContextAdapter>>"]
                ProgressionContextAdapter["ğŸ“ˆ Progression Context<br/><<ContextAdapter>>"]
                IdentityContextAdapter["ğŸ†” Identity Context<br/><<ContextAdapter>>"]
                CertificationAuthorityAdapter["ğŸ… Certification Authority<br/><<CertificationAdapter>>"]
            end
            
            %% Cache Adapters
            subgraph TrainerCacheAdapters ["Cache Adapters"]
                TrainerProfileCache["ğŸ’¾ Trainer Profile Cache<br/><<CacheAdapter>>"]
                ClientListCache["ğŸ’¾ Client List Cache<br/><<CacheAdapter>>"]
                SessionCache["ğŸ’¾ Session Cache<br/><<CacheAdapter>>"]
                DashboardCache["ğŸ’¾ Dashboard Cache<br/><<CacheAdapter>>"]
            end
        end
        
        %% ===== CONTEXT BUS INTERFACES =====
        subgraph TrainerContextBus ["Context Bus Interfaces"]
            TrainerCommandBus["âš¡ Trainer Command Bus<br/><<CommandBus>>"]
            TrainerQueryBus["â“ Trainer Query Bus<br/><<QueryBus>>"]
            TrainerEventBus["ğŸ“¨ Trainer Event Bus<br/><<EventBus>>"]
        end
        
        %% ===== POLICY ENFORCEMENT =====
        subgraph TrainerPolicyLayer ["Policy Enforcement Layer"]
            TrainerPolicyEnforcementPoint["ğŸ›¡ï¸ Trainer Policy Enforcement Point<br/><<PEP>>"]
            CertificationPolicyService["ğŸ… Certification Policy<br/><<Policy>>"]
            ClientPrivacyPolicyService["ğŸ”’ Client Privacy Policy<br/><<Policy>>"]
            PaymentPolicyService["ğŸ’³ Payment Policy<br/><<Policy>>"]
        end
    end
    
    %% ===== EXTERNAL SYSTEMS =====
    subgraph TrainerExternal ["ğŸŒ External Systems"]
        MongoDB["ğŸ—„ï¸ MongoDB<br/><<Database>>"]
        RedisCache["ğŸ”´ Redis<br/><<Cache>>"]
        StripeAPI["ğŸ’³ Stripe API<br/><<PaymentService>>"]
        GoogleCalendarAPI["ğŸ“… Google Calendar API<br/><<CalendarService>>"]
        ZoomAPI["ğŸ“¹ Zoom API<br/><<VideoService>>"]
        FCMService["ğŸ“± FCM Service<br/><<NotificationService>>"]
        EmailService["ğŸ“§ Email Service<br/><<EmailService>>"]
        SMSService["ğŸ“± SMS Service<br/><<SMSService>>"]
        CertificationAuthority["ğŸ… Certification Authority<br/><<CertificationService>>"]
    end
    
    %% ===== EVENTS =====
    subgraph TrainerEvents ["ğŸ“¨ Domain Events"]
        TrainerProfileCreatedEvent["ğŸ‘¨â€ğŸ« Trainer Profile Created<br/><<DomainEvent>>"]
        RelationshipEstablishedEvent["ğŸ¤ Relationship Established<br/><<DomainEvent>>"]
        SessionScheduledEvent["ğŸ“… Session Scheduled<br/><<DomainEvent>>"]
        SessionCompletedEvent["âœ… Session Completed<br/><<DomainEvent>>"]
        FeedbackProvidedEvent["ğŸ’¬ Feedback Provided<br/><<DomainEvent>>"]
        ProgramAssignedEvent["ğŸ“‹ Program Assigned<br/><<DomainEvent>>"]
        ProgramModifiedEvent["ğŸ”§ Program Modified<br/><<DomainEvent>>"]
        ClientAlertCreatedEvent["ğŸš¨ Client Alert Created<br/><<DomainEvent>>"]
        PaymentProcessedEvent["ğŸ’³ Payment Processed<br/><<DomainEvent>>"]
        TrainerCertifiedEvent["ğŸ… Trainer Certified<br/><<DomainEvent>>"]
    end
    
    %% ===== READ MODELS =====
    subgraph TrainerReadModels ["ğŸ“Š Read Models"]
        TrainerProfileRM["ğŸ‘¨â€ğŸ« Trainer Profile<br/><<ReadModel>>"]
        TrainerDashboardRM["ğŸ“Š Trainer Dashboard<br/><<ReadModel>>"]
        ClientListRM["ğŸ‘¥ Client List<br/><<ReadModel>>"]
        SessionScheduleRM["ğŸ“… Session Schedule<br/><<ReadModel>>"]
        FeedbackSummaryRM["ğŸ’¬ Feedback Summary<br/><<ReadModel>>"]
        EarningsReportRM["ğŸ’° Earnings Report<br/><<ReadModel>>"]
        ClientProgressRM["ğŸ“ˆ Client Progress<br/><<ReadModel>>"]
        AlertSummaryRM["ğŸš¨ Alert Summary<br/><<ReadModel>>"]
        TrainerSearchRM["ğŸ” Trainer Search<br/><<ReadModel>>"]
    end
    
    %% ===== EXTERNAL CONTEXT REFERENCES =====
    subgraph ExternalContexts ["ğŸŒ External Contexts"]
        UserContext["ğŸ‘¤ User Context<br/><<ExternalContext>>"]
        ProgramContext["ğŸ“‹ Program Context<br/><<ExternalContext>>"]
        ProgressionContext["ğŸ“ˆ Progression Context<br/><<ExternalContext>>"]
        IdentityContext["ğŸ†” Identity Context<br/><<ExternalContext>>"]
        NotificationContext["ğŸ”” Notification Context<br/><<ExternalContext>>"]
        OrganizationContext["ğŸ¢ Organization Context<br/><<ExternalContext>>"]
    end
    
    %% ===== RELATIONSHIPS =====
    
    %% Application Service orchestrates everything
    TrainerApplicationService --> TrainerCommandBus
    TrainerApplicationService --> TrainerQueryBus
    TrainerApplicationService --> TrainerEventBus
    
    %% Commands and Queries through Application Service
    TrainerCommands --> TrainerApplicationService
    TrainerQueries --> TrainerApplicationService
    TrainerSagas --> TrainerApplicationService
    
    %% Application Service to Domain (orchestration)
    TrainerApplicationService --> TrainerProfile
    TrainerApplicationService --> ClientCoachRelationship
    TrainerApplicationService --> CoachingSession
    TrainerApplicationService --> ProgramAssignment
    TrainerApplicationService --> TrainerDashboard
    TrainerApplicationService --> RelationshipManagementService
    TrainerApplicationService --> SessionSchedulingService
    TrainerApplicationService --> FeedbackAnalysisService
    TrainerApplicationService --> ProgressMonitoringService
    TrainerApplicationService --> CertificationService
    
    %% Policy Enforcement Integration
    TrainerApplicationService --> TrainerPolicyEnforcementPoint
    TrainerPolicyEnforcementPoint --> CertificationPolicyService
    TrainerPolicyEnforcementPoint --> ClientPrivacyPolicyService
    TrainerPolicyEnforcementPoint --> PaymentPolicyService
    
    %% Domain to Ports (Dependency Inversion)
    TrainerProfile -->|uses| ITrainerRepo
    TrainerProfile -->|uses| IPaymentService
    ClientCoachRelationship -->|uses| IRelationshipRepo
    ClientCoachRelationship -->|uses| IUserService
    CoachingSession -->|uses| ISessionRepo
    CoachingSession -->|uses| ICalendarService
    CoachingSession -->|uses| IVideoCallService
    ProgramAssignment -->|uses| IAssignmentRepo
    ProgramAssignment -->|uses| IProgramService
    SessionSchedulingService -->|uses| INotificationService
    ProgressMonitoringService -->|uses| IProgressionService
    CertificationService -->|uses| ICertificationService
    RelationshipManagementService -->|uses| IIdentityService
    
    %% Ports to Adapters (Implementation)
    ITrainerRepo -.->|implements| MongoTrainerRepo
    IRelationshipRepo -.->|implements| MongoRelationshipRepo
    ISessionRepo -.->|implements| MongoSessionRepo
    IAssignmentRepo -.->|implements| MongoAssignmentRepo
    IFeedbackRepo -.->|implements| MongoFeedbackRepo
    IAlertRepo -.->|implements| MongoAlertRepo
    IPaymentService -.->|implements| StripePaymentAdapter
    ICalendarService -.->|implements| GoogleCalendarAdapter
    IVideoCallService -.->|implements| ZoomVideoAdapter
    INotificationService -.->|implements| FCMNotificationAdapter
    IUserService -.->|implements| UserContextAdapter
    IProgramService -.->|implements| ProgramContextAdapter
    IProgressionService -.->|implements| ProgressionContextAdapter
    IIdentityService -.->|implements| IdentityContextAdapter
    ICertificationService -.->|implements| CertificationAuthorityAdapter
    
    %% Adapters to External Systems
    MongoTrainerRepo -->|connects| MongoDB
    MongoRelationshipRepo -->|connects| MongoDB
    MongoSessionRepo -->|connects| MongoDB
    MongoAssignmentRepo -->|connects| MongoDB
    MongoFeedbackRepo -->|connects| MongoDB
    MongoAlertRepo -->|connects| MongoDB
    TrainerProfileCache -->|connects| RedisCache
    ClientListCache -->|connects| RedisCache
    SessionCache -->|connects| RedisCache
    DashboardCache -->|connects| RedisCache
    StripePaymentAdapter -->|connects| StripeAPI
    GoogleCalendarAdapter -->|connects| GoogleCalendarAPI
    ZoomVideoAdapter -->|connects| ZoomAPI
    FCMNotificationAdapter -->|connects| FCMService
    FCMNotificationAdapter -->|also uses| EmailService
    FCMNotificationAdapter -->|also uses| SMSService
    CertificationAuthorityAdapter -->|connects| CertificationAuthority
    
    %% Cross-Context Communication
    UserContextAdapter -.->|async calls| UserContext
    ProgramContextAdapter -.->|async calls| ProgramContext
    ProgressionContextAdapter -.->|async calls| ProgressionContext
    IdentityContextAdapter -.->|async calls| IdentityContext
    FCMNotificationAdapter -.->|async calls| NotificationContext
    
    %% Domain Events
    TrainerProfile -.->|publishes| TrainerProfileCreatedEvent
    TrainerProfile -.->|publishes| TrainerCertifiedEvent
    ClientCoachRelationship -.->|publishes| RelationshipEstablishedEvent
    CoachingSession -.->|publishes| SessionScheduledEvent
    CoachingSession -.->|publishes| SessionCompletedEvent
    TrainingFeedback -.->|publishes| FeedbackProvidedEvent
    ProgramAssignment -.->|publishes| ProgramAssignedEvent
    ProgramModification -.->|publishes| ProgramModifiedEvent
    ClientAlert -.->|publishes| ClientAlertCreatedEvent
    TrainerProfile -.->|publishes| PaymentProcessedEvent
    
    %% Event to Read Models (via Event Bus)
    TrainerEventBus -.->|projects to| TrainerProfileRM
    TrainerEventBus -.->|projects to| TrainerDashboardRM
    TrainerEventBus -.->|projects to| ClientListRM
    TrainerEventBus -.->|projects to| SessionScheduleRM
    TrainerEventBus -.->|projects to| FeedbackSummaryRM
    TrainerEventBus -.->|projects to| EarningsReportRM
    TrainerEventBus -.->|projects to| ClientProgressRM
    TrainerEventBus -.->|projects to| AlertSummaryRM
    TrainerEventBus -.->|projects to| TrainerSearchRM
    
    %% Events to Event Bus
    TrainerProfileCreatedEvent -.->|publishes to| TrainerEventBus
    RelationshipEstablishedEvent -.->|publishes to| TrainerEventBus
    SessionScheduledEvent -.->|publishes to| TrainerEventBus
    SessionCompletedEvent -.->|publishes to| TrainerEventBus
    FeedbackProvidedEvent -.->|publishes to| TrainerEventBus
    ProgramAssignedEvent -.->|publishes to| TrainerEventBus
    ProgramModifiedEvent -.->|publishes to| TrainerEventBus
    ClientAlertCreatedEvent -.->|publishes to| TrainerEventBus
    PaymentProcessedEvent -.->|publishes to| TrainerEventBus
    TrainerCertifiedEvent -.->|publishes to| TrainerEventBus
    
    %% Sagas listen to events
    ClientOnboardingSaga -.->|listens to| RelationshipEstablishedEvent
    SessionCompletionSaga -.->|listens to| SessionCompletedEvent
    PaymentProcessingSaga -.->|listens to| SessionCompletedEvent
    ProgressReviewSaga -.->|listens to| FeedbackProvidedEvent
    CertificationSaga -.->|listens to| TrainerProfileCreatedEvent
    
    %% Context Bus to External Event Bus
    TrainerEventBus -.->|integrates with| ExternalContexts
graph TB
    %% ===== PROGRESSION TRACKING CONTEXT =====
    subgraph ProgressionContext ["ğŸ“ˆ Progression Tracking Context"]
        
        %% ===== APPLICATION SERVICE LAYER =====
        subgraph ProgressionApplicationLayer ["Application Service Layer <<Application>>"]
            ProgressionApplicationService["ğŸ“ˆ Progression Application Service<br/><<ApplicationService>>"]
            
            %% Commands
            subgraph ProgressionCommands ["Commands"]
                RecordPerformanceCmd["ğŸ“Š Record Performance<br/><<Command>>"]
                StartSessionCmd["â–¶ï¸ Start Session<br/><<Command>>"]
                CompleteSessionCmd["âœ… Complete Session<br/><<Command>>"]
                RecordSetCmd["ğŸ“Š Record Set<br/><<Command>>"]
                SetGoalCmd["ğŸ¯ Set Goal<br/><<Command>>"]
                UpdateGoalCmd["âœï¸ Update Goal<br/><<Command>>"]
                AchieveMilestoneCmd["ğŸ–ï¸ Achieve Milestone<br/><<Command>>"]
                ValidateRecordCmd["âœ… Validate Record<br/><<Command>>"]
            end
            
            %% Queries
            subgraph ProgressionQueries ["Queries"]
                GetProgressionQuery["ğŸ“ˆ Get Progression<br/><<Query>>"]
                GetPersonalRecordsQuery["ğŸ† Get Records<br/><<Query>>"]
                GetGoalsQuery["ğŸ¯ Get Goals<br/><<Query>>"]
                GetSessionHistoryQuery["ğŸ“… Get Session History<br/><<Query>>"]
                GetProgressStatsQuery["ğŸ“Š Get Progress Stats<br/><<Query>>"]
                GetInsightsQuery["ğŸ¤– Get AI Insights<br/><<Query>>"]
                GetLeaderboardQuery["ğŸ… Get Leaderboard<br/><<Query>>"]
                GetTrendsQuery["ğŸ“ˆ Get Trends<br/><<Query>>"]
            end
            
            %% Sagas
            subgraph ProgressionSagas ["Sagas"]
                SessionCompletionSaga["ğŸ“ Session Completion<br/><<Saga>>"]
                RecordAchievementSaga["ğŸ† Record Achievement<br/><<Saga>>"]
                GoalProgressSaga["ğŸ¯ Goal Progress<br/><<Saga>>"]
                ProgressAnalysisSaga["ğŸ“Š Progress Analysis<br/><<Saga>>"]
                MotivationSaga["ğŸ’ª Motivation<br/><<Saga>>"]
            end
        end
        
        %% ===== DOMAIN LAYER (HEXAGON CORE) =====
        subgraph ProgressionDomain ["Domain Layer <<DomainCore>>"]
            direction TB
            
            %% Aggregates
            ProgressionTracking["ğŸ“ˆ Progression Tracking<br/><<AggregateRoot>>"]
            PersonalRecord["ğŸ† Personal Record<br/><<AggregateRoot>>"]
            GoalTracking["ğŸ¯ Goal Tracking<br/><<AggregateRoot>>"]
            WorkoutSession["ğŸ“ Workout Session<br/><<AggregateRoot>>"]
            
            %% Entities
            DailyPerformance["ğŸ“… Daily Performance<br/><<Entity>>"]
            Milestone["ğŸ–ï¸ Milestone<br/><<Entity>>"]
            SetData["ğŸ“Š Set Data<br/><<Entity>>"]
            WorkoutSessionExercise["ğŸ¯ Session Exercise<br/><<Entity>>"]
            
            %% Value Objects
            MetricValue["ğŸ“Š Metric Value<br/><<ValueObject>>"]
            ProgressPercentage["ğŸ“ˆ Progress Percentage<br/><<ValueObject>>"]
            ImprovementRate["â¬†ï¸ Improvement Rate<br/><<ValueObject>>"]
            TrainingLoad["ğŸ’ª Training Load<br/><<ValueObject>>"]
            
            %% Domain Services
            ProgressAnalysisService["ğŸ“Š Progress Analysis<br/><<DomainService>>"]
            GoalSettingService["ğŸ¯ Goal Setting<br/><<DomainService>>"]
            RecordValidationService["âœ… Record Validation<br/><<DomainService>>"]
            LoadCalculationService["âš–ï¸ Load Calculation<br/><<DomainService>>"]
            MotivationService["ğŸ’ª Motivation<br/><<DomainService>>"]
        end
        
        %% ===== PORTS (DOMAIN INTERFACES) =====
        subgraph ProgressionPorts ["Ports <<Port>>"]
            direction TB
            
            %% Repository Ports
            IProgressionRepo["ğŸ“ˆ IProgressionRepository<br/><<Port>>"]
            IPersonalRecordRepo["ğŸ† IPersonalRecordRepository<br/><<Port>>"]
            IGoalRepo["ğŸ¯ IGoalRepository<br/><<Port>>"]
            ISessionRepo["ğŸ“ ISessionRepository<br/><<Port>>"]
            IPerformanceRepo["ğŸ“… IPerformanceRepository<br/><<Port>>"]
            
            %% Service Ports
            IMetricsCalculator["ğŸ“Š IMetricsCalculator<br/><<Port>>"]
            IAnalyticsService["ğŸ“ˆ IAnalyticsService<br/><<Port>>"]
            INotificationService["ğŸ”” INotificationService<br/><<Port>>"]
            IAIInsightsService["ğŸ¤– IAIInsightsService<br/><<Port>>"]
            IWorkoutService["ğŸ’ª IWorkoutService<br/><<Port>>"]
            IUserService["ğŸ‘¤ IUserService<br/><<Port>>"]
            IIdentityService["ğŸ†” IIdentityService<br/><<Port>>"]
        end
        
        %% ===== INFRASTRUCTURE LAYER (ADAPTERS) =====
        subgraph ProgressionAdapters ["Infrastructure Layer <<Adapter>>"]
            direction TB
            
            %% Repository Adapters
            subgraph ProgressionRepositoryAdapters ["Repository Adapters"]
                MongoProgressionRepo["ğŸ—„ï¸ Mongo Progression Repository<br/><<RepositoryAdapter>>"]
                MongoRecordRepo["ğŸ—„ï¸ Mongo Record Repository<br/><<RepositoryAdapter>>"]
                MongoGoalRepo["ğŸ—„ï¸ Mongo Goal Repository<br/><<RepositoryAdapter>>"]
                MongoSessionRepo["ğŸ—„ï¸ Mongo Session Repository<br/><<RepositoryAdapter>>"]
                TimeSeriesPerformanceRepo["ğŸ“ˆ TimeSeries Performance<br/><<RepositoryAdapter>>"]
            end
            
            %% Service Adapters
            subgraph ProgressionServiceAdapters ["Service Adapters"]
                DataAnalyticsAdapter["ğŸ“Š Data Analytics<br/><<AnalyticsAdapter>>"]
                WorkoutContextAdapter["ğŸ’ª Workout Context<br/><<ContextAdapter>>"]
                OpenAIInsightsAdapter["ğŸ¤– OpenAI Insights<br/><<AIAdapter>>"]
                FCMNotificationAdapter["ğŸ“± FCM Notification<br/><<NotificationAdapter>>"]
                TensorFlowMLAdapter["ğŸ§  TensorFlow ML<br/><<MLAdapter>>"]
                UserContextAdapter["ğŸ‘¤ User Context<br/><<ContextAdapter>>"]
                IdentityContextAdapter["ğŸ†” Identity Context<br/><<ContextAdapter>>"]
            end
            
            %% Cache Adapters
            subgraph ProgressionCacheAdapters ["Cache Adapters"]
                ProgressionCache["ğŸ’¾ Progression Cache<br/><<CacheAdapter>>"]
                RecordsCache["ğŸ’¾ Records Cache<br/><<CacheAdapter>>"]
                LeaderboardCache["ğŸ’¾ Leaderboard Cache<br/><<CacheAdapter>>"]
                InsightsCache["ğŸ’¾ Insights Cache<br/><<CacheAdapter>>"]
            end
        end
        
        %% ===== CONTEXT BUS INTERFACES =====
        subgraph ProgressionContextBus ["Context Bus Interfaces"]
            ProgressionCommandBus["âš¡ Progression Command Bus<br/><<CommandBus>>"]
            ProgressionQueryBus["â“ Progression Query Bus<br/><<QueryBus>>"]
            ProgressionEventBus["ğŸ“¨ Progression Event Bus<br/><<EventBus>>"]
        end
        
        %% ===== POLICY ENFORCEMENT =====
        subgraph ProgressionPolicyLayer ["Policy Enforcement Layer"]
            ProgressionPolicyEnforcementPoint["ğŸ›¡ï¸ Progression Policy Enforcement Point<br/><<PEP>>"]
            RecordValidationPolicyService["âœ… Record Validation Policy<br/><<Policy>>"]
            PrivacyPolicyService["ğŸ”’ Privacy Policy<br/><<Policy>>"]
        end
    end
    
    %% ===== EXTERNAL SYSTEMS =====
    subgraph ProgressionExternal ["ğŸŒ External Systems"]
        MongoDB["ğŸ—„ï¸ MongoDB<br/><<Database>>"]
        InfluxDB["ğŸ“ˆ InfluxDB<br/><<TimeSeriesDB>>"]
        RedisCache["ğŸ”´ Redis<br/><<Cache>>"]
        DataWarehouse["ğŸ›ï¸ Data Warehouse<br/><<Analytics>>"]
        OpenAIAPI["ğŸ¤– OpenAI API<br/><<AIService>>"]
        TensorFlowServing["ğŸ§  TensorFlow Serving<br/><<MLService>>"]
        FCMService["ğŸ“± FCM Service<br/><<NotificationService>>"]
        ElasticsearchCluster["ğŸ” Elasticsearch<br/><<SearchEngine>>"]
    end
    
    %% ===== EVENTS =====
    subgraph ProgressionEvents ["ğŸ“¨ Domain Events"]
        PerformanceRecordedEvent["ğŸ“Š Performance Recorded<br/><<DomainEvent>>"]
        PersonalRecordAchievedEvent["ğŸ† Personal Record Achieved<br/><<DomainEvent>>"]
        SessionStartedEvent["â–¶ï¸ Session Started<br/><<DomainEvent>>"]
        SessionCompletedEvent["âœ… Session Completed<br/><<DomainEvent>>"]
        GoalSetEvent["ğŸ¯ Goal Set<br/><<DomainEvent>>"]
        GoalAchievedEvent["ğŸ… Goal Achieved<br/><<DomainEvent>>"]
        MilestoneAchievedEvent["ğŸ–ï¸ Milestone Achieved<br/><<DomainEvent>>"]
        PlateauDetectedEvent["ğŸ“‰ Plateau Detected<br/><<DomainEvent>>"]
        RecordValidatedEvent["âœ… Record Validated<br/><<DomainEvent>>"]
    end
    
    %% ===== READ MODELS =====
    subgraph ProgressionReadModels ["ğŸ“Š Read Models"]
        ProgressionDashboardRM["ğŸ“ˆ Progression Dashboard<br/><<ReadModel>>"]
        PersonalRecordsRM["ğŸ† Personal Records<br/><<ReadModel>>"]
        GoalProgressRM["ğŸ¯ Goal Progress<br/><<ReadModel>>"]
        SessionHistoryRM["ğŸ“… Session History<br/><<ReadModel>>"]
        LeaderboardRM["ğŸ… Leaderboard<br/><<ReadModel>>"]
        ProgressInsightsRM["ğŸ¤– Progress Insights<br/><<ReadModel>>"]
        TrainingLoadRM["ğŸ’ª Training Load<br/><<ReadModel>>"]
        TrendsAnalysisRM["ğŸ“ˆ Trends Analysis<br/><<ReadModel>>"]
    end
    
    %% ===== EXTERNAL CONTEXT REFERENCES =====
    subgraph ExternalContexts ["ğŸŒ External Contexts"]
        WorkoutContext["ğŸ’ª Workout Context<br/><<ExternalContext>>"]
        UserContext["ğŸ‘¤ User Context<br/><<ExternalContext>>"]
        IdentityContext["ğŸ†” Identity Context<br/><<ExternalContext>>"]
        NotificationContext["ğŸ”” Notification Context<br/><<ExternalContext>>"]
        TrainerContext["ğŸ‘¨â€ğŸ« Trainer Context<br/><<ExternalContext>>"]
    end
    
    %% ===== RELATIONSHIPS =====
    
    %% Application Service orchestrates everything
    ProgressionApplicationService --> ProgressionCommandBus
    ProgressionApplicationService --> ProgressionQueryBus
    ProgressionApplicationService --> ProgressionEventBus
    
    %% Commands and Queries through Application Service
    ProgressionCommands --> ProgressionApplicationService
    ProgressionQueries --> ProgressionApplicationService
    ProgressionSagas --> ProgressionApplicationService
    
    %% Application Service to Domain (orchestration)
    ProgressionApplicationService --> ProgressionTracking
    ProgressionApplicationService --> PersonalRecord
    ProgressionApplicationService --> GoalTracking
    ProgressionApplicationService --> WorkoutSession
    ProgressionApplicationService --> ProgressAnalysisService
    ProgressionApplicationService --> GoalSettingService
    ProgressionApplicationService --> RecordValidationService
    ProgressionApplicationService --> LoadCalculationService
    ProgressionApplicationService --> MotivationService
    
    %% Policy Enforcement Integration
    ProgressionApplicationService --> ProgressionPolicyEnforcementPoint
    ProgressionPolicyEnforcementPoint --> RecordValidationPolicyService
    ProgressionPolicyEnforcementPoint --> PrivacyPolicyService
    
    %% Domain to Ports (Dependency Inversion)
    ProgressionTracking -->|uses| IProgressionRepo
    ProgressionTracking -->|uses| IMetricsCalculator
    PersonalRecord -->|uses| IPersonalRecordRepo
    PersonalRecord -->|uses| INotificationService
    GoalTracking -->|uses| IGoalRepo
    GoalTracking -->|uses| IAIInsightsService
    WorkoutSession -->|uses| ISessionRepo
    WorkoutSession -->|uses| IWorkoutService
    ProgressAnalysisService -->|uses| IAnalyticsService
    RecordValidationService -->|uses| IUserService
    RecordValidationService -->|uses| IIdentityService
    
    %% Ports to Adapters (Implementation)
    IProgressionRepo -.->|implements| MongoProgressionRepo
    IPersonalRecordRepo -.->|implements| MongoRecordRepo
    IGoalRepo -.->|implements| MongoGoalRepo
    ISessionRepo -.->|implements| MongoSessionRepo
    IPerformanceRepo -.->|implements| TimeSeriesPerformanceRepo
    IMetricsCalculator -.->|implements| DataAnalyticsAdapter
    IAnalyticsService -.->|implements| DataAnalyticsAdapter
    INotificationService -.->|implements| FCMNotificationAdapter
    IAIInsightsService -.->|implements| OpenAIInsightsAdapter
    IWorkoutService -.->|implements| WorkoutContextAdapter
    IUserService -.->|implements| UserContextAdapter
    IIdentityService -.->|implements| IdentityContextAdapter
    
    %% Adapters to External Systems
    MongoProgressionRepo -->|connects| MongoDB
    MongoRecordRepo -->|connects| MongoDB
    MongoGoalRepo -->|connects| MongoDB
    MongoSessionRepo -->|connects| MongoDB
    TimeSeriesPerformanceRepo -->|connects| InfluxDB
    ProgressionCache -->|connects| RedisCache
    RecordsCache -->|connects| RedisCache
    LeaderboardCache -->|connects| RedisCache
    InsightsCache -->|connects| RedisCache
    DataAnalyticsAdapter -->|connects| DataWarehouse
    OpenAIInsightsAdapter -->|connects| OpenAIAPI
    TensorFlowMLAdapter -->|connects| TensorFlowServing
    FCMNotificationAdapter -->|connects| FCMService
    
    %% Cross-Context Communication
    WorkoutContextAdapter -.->|async calls| WorkoutContext
    UserContextAdapter -.->|async calls| UserContext
    IdentityContextAdapter -.->|async calls| IdentityContext
    FCMNotificationAdapter -.->|async calls| NotificationContext
    
    %% Domain Events
    ProgressionTracking -.->|publishes| PerformanceRecordedEvent
    PersonalRecord -.->|publishes| PersonalRecordAchievedEvent
    WorkoutSession -.->|publishes| SessionStartedEvent
    WorkoutSession -.->|publishes| SessionCompletedEvent
    GoalTracking -.->|publishes| GoalSetEvent
    GoalTracking -.->|publishes| GoalAchievedEvent
    Milestone -.->|publishes| MilestoneAchievedEvent
    ProgressAnalysisService -.->|publishes| PlateauDetectedEvent
    RecordValidationService -.->|publishes| RecordValidatedEvent
    
    %% Event to Read Models (via Event Bus)
    ProgressionEventBus -.->|projects to| ProgressionDashboardRM
    ProgressionEventBus -.->|projects to| PersonalRecordsRM
    ProgressionEventBus -.->|projects to| GoalProgressRM
    ProgressionEventBus -.->|projects to| SessionHistoryRM
    ProgressionEventBus -.->|projects to| LeaderboardRM
    ProgressionEventBus -.->|projects to| ProgressInsightsRM
    ProgressionEventBus -.->|projects to| TrainingLoadRM
    ProgressionEventBus -.->|projects to| TrendsAnalysisRM
    
    %% Events to Event Bus
    PerformanceRecordedEvent -.->|publishes to| ProgressionEventBus
    PersonalRecordAchievedEvent -.->|publishes to| ProgressionEventBus
    SessionStartedEvent -.->|publishes to| ProgressionEventBus
    SessionCompletedEvent -.->|publishes to| ProgressionEventBus
    GoalSetEvent -.->|publishes to| ProgressionEventBus
    GoalAchievedEvent -.->|publishes to| ProgressionEventBus
    MilestoneAchievedEvent -.->|publishes to| ProgressionEventBus
    PlateauDetectedEvent -.->|publishes to| ProgressionEventBus
    RecordValidatedEvent -.->|publishes to| ProgressionEventBus
    
    %% Sagas listen to events
    SessionCompletionSaga -.->|listens to| SessionCompletedEvent
    RecordAchievementSaga -.->|listens to| PersonalRecordAchievedEvent
    GoalProgressSaga -.->|listens to| GoalAchievedEvent
    ProgressAnalysisSaga -.->|listens to| PerformanceRecordedEvent
    MotivationSaga -.->|listens to| PlateauDetectedEvent
    
    %% Context Bus to External Event Bus
    ProgressionEventBus -.->|integrates with| ExternalContexts
    
    %% ===== STYLING =====
    classDef aggregate fill:#e1f5fe,stroke:#01579b,stroke-width:3px
    classDef entity fill:#e8f5e8,stroke:#1b5e20,stroke-width:2px
    classDef valueObject fill:#fff3e0,stroke:#e65100,stroke-width:2px
    classDef port fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    classDef adapter fill:#fff8e1,stroke:#f57f17,stroke-width:2px
    classDef external fill:#fafafa,stroke:#424242,stroke-width:2px
    classDef command fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px
    classDef query fill:#fce4ec,stroke:#880e4f,stroke-width:2px
    classDef event fill:#f1f8e9,stroke:#33691e,stroke-width:2px
    classDef readModel fill:#e0f2f1,stroke:#00695c,stroke-width:2px
    classDef externalContext fill:#f5f5f5,stroke:#757575,stroke-width:2px,stroke-dasharray: 5 5
    classDef applicationService fill:#e3f2fd,stroke:#0277bd,stroke-width:4px
    classDef contextBus fill:#fff9c4,stroke:#f9a825,stroke-width:2px
    classDef policy fill:#f3e5f5,stroke:#7b1fa2,stroke-width:3px
    
    class ProgressionTracking,PersonalRecord,GoalTracking,WorkoutSession aggregate
    class DailyPerformance,Milestone,SetData,WorkoutSessionExercise entity
    class MetricValue,ProgressPercentage,ImprovementRate,TrainingLoad valueObject
    class IProgressionRepo,IPersonalRecordRepo,IGoalRepo,ISessionRepo,IPerformanceRepo,IMetricsCalculator,IAnalyticsService,INotificationService,IAIInsightsService,IWorkoutService,IUserService,IIdentityService port
    class MongoProgressionRepo,MongoRecordRepo,MongoGoalRepo,MongoSessionRepo,TimeSeriesPerformanceRepo,DataAnalyticsAdapter,WorkoutContextAdapter,OpenAIInsightsAdapter,FCMNotificationAdapter,TensorFlowMLAdapter,UserContextAdapter,IdentityContextAdapter,ProgressionCache,RecordsCache,LeaderboardCache,InsightsCache adapter
    class MongoDB,InfluxDB,RedisCache,DataWarehouse,OpenAIAPI,TensorFlowServing,FCMService,ElasticsearchCluster external
    class RecordPerformanceCmd,StartSessionCmd,CompleteSessionCmd,RecordSetCmd,SetGoalCmd,UpdateGoalCmd,AchieveMilestoneCmd,ValidateRecordCmd command
    class GetProgressionQuery,GetPersonalRecordsQuery,GetGoalsQuery,GetSessionHistoryQuery,GetProgressStatsQuery,GetInsightsQuery,GetLeaderboardQuery,GetTrendsQuery query
    class PerformanceRecordedEvent,PersonalRecordAchievedEvent,SessionStartedEvent,SessionCompletedEvent,GoalSetEvent,GoalAchievedEvent,MilestoneAchievedEvent,PlateauDetectedEvent,RecordValidatedEvent event
    class ProgressionDashboardRM,PersonalRecordsRM,GoalProgressRM,SessionHistoryRM,LeaderboardRM,ProgressInsightsRM,TrainingLoadRM,TrendsAnalysisRM readModel
    class WorkoutContext,UserContext,IdentityContext,NotificationContext,TrainerContext externalContext
    class ProgressionApplicationService applicationService
    class ProgressionCommandBus,ProgressionQueryBus,ProgressionEventBus contextBus
    class ProgressionPolicyEnforcementPoint,RecordValidationPolicyService,PrivacyPolicyService policy
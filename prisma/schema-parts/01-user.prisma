// =====================================
// USER MANAGEMENT
// =====================================

model User {
  id           String    @id @default(cuid())
  email        String    @unique @db.VarChar(255)
  firstName    String    @map("first_name") @db.VarChar(255)
  lastName     String    @map("last_name") @db.VarChar(255)
  dateOfBirth  DateTime? @map("date_of_birth") @db.Date
  notes        String?   @db.Text
  visibilityId String    @map("visibility_id")
  isActive     Boolean   @default(true) @map("is_active")
  createdAt    DateTime  @default(now()) @map("created_at")
  updatedAt    DateTime  @updatedAt @map("updated_at")
  lastLogin    DateTime? @map("last_login")
  createdBy    String    @map("created_by")

  // Core Relations
  visibility    Visibility @relation("UserVisibility", fields: [visibilityId], references: [id])
  createdByUser User?      @relation("UserCreatedBy", fields: [createdBy], references: [id])
  usersCreated  User[]     @relation("UserCreatedBy")

  // Created entities (administrative)
  visibilitiesCreated     Visibility[]      @relation("VisibilityCreatedBy")
  categoriesCreated       Category[]        @relation("CategoryCreatedBy")
  tagsCreated             Tag[]             @relation("TagCreatedBy")
  difficultyLevelsCreated DifficultyLevel[] @relation("DifficultyLevelCreatedBy")
  metricsCreated          Metric[]          @relation("MetricCreatedBy")

  // Content creation
  exercisesCreated    Exercise[]    @relation("ExerciseCreatedBy")
  workoutsCreated     Workout[]     @relation("WorkoutCreatedBy")
  programsCreated     Program[]     @relation("ProgramCreatedBy")
  equipmentCreated    Equipment[]   @relation("EquipmentCreatedBy")
  mediaCreated        Media[]       @relation("MediaCreatedBy")
  mediaTypesCreated   MediaType[]   @relation("MediaTypeCreatedBy")
  muscleGroupsCreated MuscleGroup[] @relation("MuscleGroupCreatedBy")
  musclesCreated      Muscle[]      @relation("MuscleCreatedBy")

  // Junction table creations
  equipmentCategoriesCreated   EquipmentCategory[]    @relation("EquipmentCategoryCreatedBy")
  equipmentTagsCreated         EquipmentTag[]         @relation("EquipmentTagCreatedBy")
  exerciseCategoriesCreated    ExerciseCategory[]     @relation("ExerciseCategoryCreatedBy")
  exerciseTagsCreated          ExerciseTag[]          @relation("ExerciseTagCreatedBy")
  exerciseMuscleTargetsCreated ExerciseMuscleTarget[] @relation("ExerciseMuscleTargetCreatedBy")
  exerciseEquipmentCreated     ExerciseEquipment[]    @relation("ExerciseEquipmentCreatedBy")
  workoutCategoriesCreated     WorkoutCategory[]      @relation("WorkoutCategoryCreatedBy")
  workoutTagsCreated           WorkoutTag[]           @relation("WorkoutTagCreatedBy")
  workoutMuscleTargetsCreated  WorkoutMuscleTarget[]  @relation("WorkoutMuscleTargetCreatedBy")
  workoutSetsCreated           WorkoutSet[]           @relation("WorkoutSetCreatedBy")
  exerciseInstructionsCreated  ExerciseInstruction[]  @relation("ExerciseInstructionCreatedBy")
  programCategoriesCreated     ProgramCategory[]      @relation("ProgramCategoryCreatedBy")
  programTagsCreated           ProgramTag[]           @relation("ProgramTagCreatedBy")
  programSchedulesCreated      ProgramSchedule[]      @relation("ProgramScheduleCreatedBy")
  scheduleWorkoutsCreated      ScheduleWorkout[]      @relation("ScheduleWorkoutCreatedBy")
  programPhasesCreated         ProgramPhase[]         @relation("ProgramPhaseCreatedBy")

  // Media relations
  mediaTagsCreated      MediaTag[]       @relation("MediaTagCreatedBy")
  mediaMetadataCreated  MediaMetadata[]  @relation("MediaMetadataCreatedBy")
  exerciseMediaCreated  ExerciseMedia[]  @relation("ExerciseMediaCreatedBy")
  equipmentMediaCreated EquipmentMedia[] @relation("EquipmentMediaCreatedBy")
  workoutMediaCreated   WorkoutMedia[]   @relation("WorkoutMediaCreatedBy")
  programMediaCreated   ProgramMedia[]   @relation("ProgramMediaCreatedBy")

  // User activities and progress
  programEnrollments   UserProgramEnrollment[]   @relation("UserProgramEnrollments")
  workoutSessions      UserWorkoutSession[]      @relation("UserWorkoutSessions")
  measurements         UserMeasurement[]         @relation("UserMeasurements")
  exercisePerformances UserExercisePerformance[] @relation("UserExercisePerformances")

  // Activity creation tracking
  programEnrollmentsCreated   UserProgramEnrollment[]   @relation("UserProgramEnrollmentCreatedBy")
  workoutSessionsCreated      UserWorkoutSession[]      @relation("UserWorkoutSessionCreatedBy")
  exercisePerformancesCreated UserExercisePerformance[] @relation("UserExercisePerformanceCreatedBy")
  measurementsCreated         UserMeasurement[]         @relation("UserMeasurementCreatedBy")
  UserExercisePerformance     UserExercisePerformance[]

  @@map("user")
}
